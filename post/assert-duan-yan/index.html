<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    C++ è¯­æ³• / Assert æ–­è¨€ | Malachite
</title>
<link rel="shortcut icon" href="https://malachiten.github.io/favicon.ico?v=1573134319364">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://malachiten.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://malachiten.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://malachiten.github.io">
                <img class="avatar" src="https://malachiten.github.io/images/avatar.png?v=1573134319364" alt="">
            </a>
            <div class="site-title">
                <h1>
                    Malachite
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            C++ è¯­æ³• / Assert æ–­è¨€
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-10-31</time>
                            
                        </div>
                        
                                <div class="post-content">
                                    <p>æ–­è¨€å¹¿æ³›å­˜åœ¨äºæˆ‘æ‰€äº†è§£çš„å‡ ä¹å…¨éƒ¨è¯­è¨€ä¸­ã€‚</p>
<p>Cï¼ŒC++ï¼ŒPythonï¼ŒHaskellï¼ŒLispï¼Œâ€¦â€¦ï¼Œéƒ½æœ‰è‡ªå·±çš„æ–­è¨€å®ç°ï¼Œä¸”ä¸åŒè¯­è¨€ä¸­çš„æ–­è¨€æŒ‰ç…§å„è‡ªè¯­æ³•è§£è¯»ä¹‹åçš„â€œäººè¯â€å‡ ä¹æ²¡æœ‰ä»»ä½•æ­§ä¹‰ã€‚</p>
<p>å½“ç„¶ï¼Œæ­£å¦‚æ ‡é¢˜æ‰€è¨€ï¼šæœ¬æ–‡ä¸»è¦è®²çš„æ˜¯ C/C++ çš„æ–­è¨€ã€‚</p>
<!-- more -->
<h2 id="å¼•å…¥">å¼•å…¥</h2>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œå¦‚æœæˆ‘ä»¬çš„ç¨‹åºä¸€åˆ‡æ­£å¸¸ï¼Œåœ¨æŸäº›æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€äº›å¿…ç„¶çš„ç»“æœã€‚</p>
<p>å¦‚ Leetcode ç¬¬ä¸€é¢˜ï¼Œè®¡ç®—ä¸¤æ•°ä¹‹å’Œï¼Œå¹¶åœ¨ç›®æ ‡æ•°ç»„ä¸­æ‰¾åˆ°å¯¹åº”å€¼ï¼Œå¹¶è¿”å›å…¶ä¸‹æ ‡ã€‚</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥<strong>æ–­è¨€</strong>ï¼šæ•°ç»„ä¸­ï¼Œå¿…å®šå­˜åœ¨æˆ‘ä»¬è¦æ‰¾çš„ä¸¤æ•°ä¹‹å’Œã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¸æ˜¯æŸ¥æ‰¾å†™é”™äº†ï¼Œå°±æ˜¯ä¸¤æ•°ä¹‹å’Œç®—é”™äº†ã€‚</p>
<p><s>ä¸¤æ•°ä¹‹å’Œéƒ½ç®—é”™è¿˜å†™ä½ ğŸçš„ç¨‹åºå•Š</s>ï¼ˆåœ¨çº¿æš´èºï¼‰</p>
<p>æˆ‘ä»¬é€šè¿‡ Assert æ¥å‘Šè¯‰ç¨‹åºæˆ‘ä»¬çš„ â€œæ–­è¨€â€ ï¼Œç„¶åï¼Œç¨‹åºä¼šæ¯æ¬¡æ‰§è¡Œåˆ°æ–­è¨€å¤„å°±åˆ¤æ–­ä¸€æ¬¡æ•°ç»„ä¸­åˆ°åº•æœ‰æ²¡æœ‰æˆ‘ä»¬è¦æŸ¥æ‰¾çš„æ•°ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±æ‰“æ–­ç¨‹åºï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯ç„¶åé€€å‡ºã€‚</p>
<h2 id="å®šä¹‰">å®šä¹‰</h2>
<blockquote>
<p>Evaluates an expression and, when the result is false, prints a diagnostic message and aborts the program.</p>
</blockquote>
<p>æ–­è¨€æœ¬èº«ï¼Œæ˜¯è¯­è¨€ä¸ºäº†è°ƒè¯•æ–¹ä¾¿ï¼Œå®ç°çš„è¿›è¡ŒçœŸå‡æ£€å®šçš„è¯­å¥ã€‚ä¸€æ—¦æ–­è¨€ä¸ºå‡ï¼Œç«‹åˆ»ç»ˆæ­¢ç¨‹åºæ‰§è¡Œï¼Œå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯å’Œé”™è¯¯å‘ç”Ÿä½ç½®åˆ°æ ‡å‡†é”™è¯¯ã€‚åœ¨åœ¨çº¿æµ‹è¯„å¹³å°ä¸Šï¼Œæ–­è¨€ä¸ºå‡å¼•å‘çš„é”™è¯¯è¢«åˆ’å½’åˆ°RE / è¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<h2 id="å®ç°">å®ç°</h2>
<p>å¯ä»¥é€šè¿‡æŸ¥é˜…å¤´æ–‡ä»¶å¾—çŸ¥ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ¥æºäº C çš„å¤´æ–‡ä»¶ï¼š</p>
<pre><code class="language-c">/**
 * This file has no copyright assigned and is placed in the Public Domain.
 * This file is part of the mingw-w64 runtime package.
 * No warranty is given; refer to the file DISCLAIMER.PD within this package.
 */

/* According to C99 standard (section 7.2) the assert
   macro shall be redefined each time assert.h gets
   included depending on the status of NDEBUG macro.  */
#undef assert

#ifndef __ASSERT_H_
#define __ASSERT_H_

#include &lt;crtdefs.h&gt;
#ifdef __cplusplus
#include &lt;stdlib.h&gt;
#endif

#ifdef __cplusplus
extern &quot;C&quot; {
#endif

#ifndef _CRT_TERMINATE_DEFINED
#define _CRT_TERMINATE_DEFINED
  void __cdecl __MINGW_NOTHROW exit(int _Code) __MINGW_ATTRIB_NORETURN;
  void __cdecl __MINGW_NOTHROW _exit(int _Code) __MINGW_ATTRIB_NORETURN;

#if !defined __NO_ISOCEXT /* extern stub in static libmingwex.a */
  /* C99 function name */
  void __cdecl _Exit(int) __MINGW_ATTRIB_NORETURN;
#ifndef __CRT__NO_INLINE
  __CRT_INLINE __MINGW_ATTRIB_NORETURN void  __cdecl _Exit(int status)
  {  _exit(status); }
#endif /* !__CRT__NO_INLINE */
#endif /* Not  __NO_ISOCEXT */

#pragma push_macro(&quot;abort&quot;)
#undef abort
  void __cdecl __MINGW_ATTRIB_NORETURN abort(void);
#pragma pop_macro(&quot;abort&quot;)

#endif /* _CRT_TERMINATE_DEFINED */

extern void __cdecl
_wassert(const wchar_t *_Message,const wchar_t *_File,unsigned _Line);
extern void __cdecl
_assert (const char *_Message, const char *_File, unsigned _Line);

#ifdef __cplusplus
}
#endif

#endif /* !defined (__ASSERT_H_) */

#if (defined _ISOC11_SOURCE \
     || (defined __STDC_VERSION__ &amp;&amp; __STDC_VERSION__ &gt;= 201112L)) \
    &amp;&amp; !defined (__cplusplus)
/* Static assertion.  Requires support in the compiler.  */
#undef static_assert
#define static_assert _Static_assert
#endif

#ifdef NDEBUG
#define assert(_Expression) ((void)0)
#else /* !defined (NDEBUG) */
#if defined(_UNICODE) || defined(UNICODE)
#define assert(_Expression) \
 (void) \
 ((!!(_Expression)) || \
  (_wassert(_CRT_WIDE(#_Expression),_CRT_WIDE(__FILE__),__LINE__),0))
#else /* not unicode */
#define assert(_Expression) \
 (void) \
 ((!!(_Expression)) || \
  (_assert(#_Expression,__FILE__,__LINE__),0))
#endif /* _UNICODE||UNICODE */
#endif /* !defined (NDEBUG) */

</code></pre>
<p>ä»¥ä¸‹ä¸º C++ çš„å¤´æ–‡ä»¶ï¼š</p>
<pre><code class="language-cpp">// -*- C++ -*- forwarding header.

// Copyright (C) 1997-2018 Free Software Foundation, Inc.
//
// This file is part of the GNU ISO C++ Library.  This library is free
// software; you can redistribute it and/or modify it under the
// terms of the GNU General Public License as published by the
// Free Software Foundation; either version 3, or (at your option)
// any later version.

// This library is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.

// Under Section 7 of GPL version 3, you are granted additional
// permissions described in the GCC Runtime Library Exception, version
// 3.1, as published by the Free Software Foundation.

// You should have received a copy of the GNU General Public License and
// a copy of the GCC Runtime Library Exception along with this program;
// see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
// &lt;http://www.gnu.org/licenses/&gt;.

/** @file cassert
 *  This is a Standard C++ Library file.  You should @c \#include this file
 *  in your programs, rather than any of the @a *.h implementation files.
 *
 *  This is the C++ version of the Standard C Library header @c assert.h,
 *  and its contents are (mostly) the same as that header, but are all
 *  contained in the namespace @c std (except for names which are defined
 *  as macros in C).
 */

//
// ISO C++ 14882: 19.2  Assertions
//

// No include guards on this header...

#pragma GCC system_header

#include &lt;bits/c++config.h&gt;
#include &lt;assert.h&gt;
</code></pre>
<p>å¯è§ï¼Œå¾ˆæœ‰è¶£çš„ä¸€ç‚¹æ˜¯ï¼Œåœ¨ C / C++ ä¸­ï¼Œâ€œæ–­è¨€â€ å³ assert å¹¶ä¸æ˜¯ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯ä¸ªå®ï¼Œå®šä¹‰åœ¨ assert.h ä¸­ã€‚</p>
<p>è€Œ C++ ä¸­çš„ cassert å¤´æ–‡ä»¶å°±ä¸ä½œä»»ä½•å®šä¹‰ï¼Œä»… <code>#include</code> äº† assert.h ã€‚assert.h ä¸­é€šè¿‡<code>extern &quot;C&quot;</code>çš„æ–¹å¼æ”¯æŒäº† C++ ä½¿ç”¨ C å¤´æ–‡ä»¶ã€‚</p>
<p>ä½ é—®æˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆæï¼Ÿ</p>
<p><s>å› ä¸ºCä½ å¤ªç¾</s>æˆ‘å’‹çŸ¥é“ã€‚</p>
<h3 id="æ™®é€šæ–­è¨€">æ™®é€šæ–­è¨€</h3>
<p>å¯¹äºè¿™æ ·çš„ä¸€èˆ¬æ–­è¨€ï¼Œä½¿ç”¨çš„æ–¹æ³•ç›¸å½“ç®€å•ï¼š</p>
<pre><code class="language-cpp">assert(bool expression);
</code></pre>
<p>æ–­è¨€æ£€æŸ¥è¡¨è¾¾å¼çš„å€¼æ˜¯ä¸æ˜¯ 0 ã€‚å¦‚æœæ˜¯ï¼Œè§¦å‘ <code>abort</code>ã€‚</p>
<h3 id="é™æ€æ–­è¨€">é™æ€æ–­è¨€</h3>
<p>æœ‰ä¸€ä¸ªä¸œè¥¿å«<code>static_assert</code>ï¼Œå±äº C++ çš„æ ‡å‡†è¯­æ³•ï¼Œæ˜¯ä» C++11 æ ‡å‡†å¼€å§‹åº”ç”¨çš„ï¼Œä¸éœ€è¦ä»»ä½•å¤´æ–‡ä»¶å°±å¯ä»¥ä½¿ç”¨ï¼Œå°±åƒ<code>__built_in_scanf</code>å’Œ<code>__built_in_printf</code>é‚£æ ·ã€‚</p>
<p><s>ç¥ä½ æ—©æ—¥å®ç°å¤´æ–‡ä»¶è‡ªç”±ï¼</s></p>
<p>è¿™ä¸ªä¸œè¥¿æœ‰ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„èƒ½åŠ›ï¼šå®ƒåœ¨ç¼–è¯‘æœŸåˆ¤æ–­ç¨‹åºæœ‰æ²¡æœ‰è¿åæ–­è¨€ã€‚å¦‚æœè¿åï¼Œç›´æ¥ç»ˆæ­¢ç¼–è¯‘ï¼Œç„¶åè¾“å‡ºç¼–è¯‘é”™è¯¯ä¿¡æ¯ã€‚è¿™ä¸ªä¿¡æ¯å¯ä»¥è‡ªç”±å®šä¹‰ã€‚</p>
<p>ç„¶è€Œç”±äºè¿™äº‹æ˜¯ç¼–è¯‘å™¨è€Œä¸æ˜¯è¿è¡Œæ—¶å¹²çš„ï¼Œé™æ€æ–­è¨€å…·æœ‰ä¸€ä¸ªé™åˆ¶ï¼šæ–­è¨€è¡¨è¾¾å¼æœ¬èº«å¿…é¡»æ˜¯å¸¸é‡ï¼Œå¦‚æœä¸æ˜¯å¸¸é‡ï¼Œé™æ€æ–­è¨€ä¸ç¬¦åˆè¯­æ³•ã€‚<s>ä½ ä¸æ˜¯æƒ³ç¼–è¯‘é”™è¯¯ğŸï¼Ÿè®©ä½ ç¼–è¯‘é”™è¯¯ä¸ªå¤Ÿã€‚</s></p>
<h2 id="é™åˆ¶">é™åˆ¶</h2>
<p>æ¯ä¸€æ¬¡æ‰§è¡Œåˆ°æ–­è¨€ï¼Œç¨‹åºéƒ½ä¼šæ‰§è¡Œæ–­è¨€è¡¨è¾¾å¼ï¼Œå¼•èµ·æ€§èƒ½çš„å¤§è§„æ¨¡æŸè€—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨å‘å¸ƒå¯ç”¨äº§å“çš„æ—¶å€™ï¼Œåº”è¯¥è®¾æ³•æ¸…é™¤ Debug æ—¶è®¾ç½®çš„æ–­è¨€å¸¦æ¥çš„å½±å“ã€‚</p>
<p><s>å½“ç„¶å¦‚æœä½ æƒ³å–è½¯ä»¶èµšé’±ï¼Œå¯ä»¥è¯•è¯•å…è´¹ç‰ˆä¸æ¸…é™¤æ–­è¨€ï¼Œä»˜è´¹ç‰ˆæ¸…é™¤æ–­è¨€â€¦â€¦å¯åˆ«è·Ÿåˆ«äººè¯´æ˜¯æˆ‘æ•™çš„å•Šï¼</s></p>
<h3 id="æ¶ˆé™¤æ–­è¨€">æ¶ˆé™¤æ–­è¨€</h3>
<p><strong>å˜¿ï¼Œåœä¸‹ï¼æ²¡å«ä½ ä¸€ä¸ªä¸€ä¸ªåˆ ï¼</strong></p>
<p><strong>ä¹Ÿæ²¡å«ä½ æ³¨é‡Šæ‰ï¼</strong></p>
<p>å®é™…ä¸Šï¼ŒC / C++ è‡ªèº«å°±æä¾›äº†å¤§é‡å–æ¶ˆæ–­è¨€çš„åŠæ³•ã€‚</p>
<p>åªéœ€å®šä¹‰å®<code>NDEBUG</code>å°±å¯ä»¥å–æ¶ˆç¨‹åºä¸­æ‰€æœ‰çš„æ–­è¨€ã€‚</p>
<p>è¿˜æœ‰ï¼Œæ–­è¨€åªæœ‰åœ¨ Debug ç‰ˆæœ¬ä¸­æ‰æœ‰æ•ˆï¼Œå¦‚æœç¼–è¯‘ä¸º Release ç‰ˆæœ¬åˆ™è¢«å¿½ç•¥ã€‚</p>
<p>é€šè¿‡è¿™äº›æ–¹å¼ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨è°ƒè¯•å®Œæˆåï¼Œå‘æŒ¥å‡ºç¨‹åºåŸæœ¬åº”æœ‰çš„æ€§èƒ½ã€‚</p>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">ä¸‹ä¸€ç¯‡</div>
                            <a href="https://malachiten.github.io/post/c-stl-die-dai-qi-xiang-guan">
                                <h3 class="post-title">
                                    C++ STL / è¿­ä»£å™¨ç›¸å…³
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">ç›®å½•</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%BC%95%E5%85%A5">å¼•å…¥</a></li>
<li><a href="#%E5%AE%9A%E4%B9%89">å®šä¹‰</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0">å®ç°</a>
<ul>
<li><a href="#%E6%99%AE%E9%80%9A%E6%96%AD%E8%A8%80">æ™®é€šæ–­è¨€</a></li>
<li><a href="#%E9%9D%99%E6%80%81%E6%96%AD%E8%A8%80">é™æ€æ–­è¨€</a></li>
</ul>
</li>
<li><a href="#%E9%99%90%E5%88%B6">é™åˆ¶</a>
<ul>
<li><a href="#%E6%B6%88%E9%99%A4%E6%96%AD%E8%A8%80">æ¶ˆé™¤æ–­è¨€</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*è·å–æ–‡ç« ç›®å½•é›†åˆ,å¯é€šè¿‡:headerè¿‡æ»¤å™¨*/
                var alis = $('.post-content :header');
                /*è·å–ä¾§è¾¹æ ç›®å½•åˆ—è¡¨é›†åˆ**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*è·å–æ»šåŠ¨æ¡åˆ°é¡¶éƒ¨çš„è·ç¦»*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*è·å–é”šç‚¹é›†åˆä¸­çš„å…ƒç´ åˆ†åˆ«åˆ°é¡¶ç‚¹çš„è·ç¦»*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*é«˜äº®æ˜¾ç¤º*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*ç»‘å®šæ»šåŠ¨äº‹ä»¶ */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> and <a herf="https://github.com/MalachiteN">MalachiteN</a> | 
  <a class="rss" href="https://malachiten.github.io/atom.xml" target="_blank">RSS</a>
  <div>
    <span id="busuanzi_container_site_pv">
      æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
    </span>
  </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>